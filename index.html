<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Історія Британських островів</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .content {
      display: flex;
      flex-direction: column; /* Змінено напрямок на вертикальний */
      align-items: center; /* Вирівнювання по центру */
      gap: 20px;
      margin-bottom: 20px;
      position: relative;
    }

    .image-container {
      position: relative;
      display: inline-block;
    }

    .main-image {
      max-width: 250px;
      height: auto;
      border-radius: 5px;
      transform: scale(1) !important;
    }

    .nav-button {
  width: 50px; /* Ширина кнопки */
  height: 50px; /* Висота кнопки */
  background-color: #1e87f0; /* Основний колір кнопки */
  color: white; /* Колір тексту (стрілки) */
  border: none; /* Прибрано рамку */
  border-radius: 50%; /* Робить кнопку круглою */
  cursor: pointer; /* Змінює курсор на "pointer" */
  font-size: 20px; /* Розмір тексту (стрілки) */
  display: flex; /* Вирівнювання тексту всередині кнопки */
  align-items: center; /* Вирівнювання по вертикалі */
  justify-content: center; /* Вирівнювання по горизонталі */
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Додає тінь */
  transition: transform 0.2s, background-color 0.3s; /* Ефекти при наведенні */
}

.nav-button:hover {
  background-color: #0f7ae5; /* Змінює колір при наведенні */
  transform: scale(1.1); /* Збільшує кнопку при наведенні */
}

.nav-button:active {
  transform: scale(0.95); /* Зменшує кнопку при натисканні */
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); /* Зменшує тінь при натисканні */
}

    #countryName {
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      margin: 10px 0;
    }

    #imageTitle {
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 10px; /* Відступ між заголовком і зображенням */
      color: #333;
    }

    .navigation {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
    }

    .history-text {
      text-align: center;
      color: #666;
      font-style: italic;
      margin: 10px 0; /* Відступ між заголовком і текстом */
      padding: 10px;
      background-color: transparent; /* Фон зроблено прозорим */
      border-radius: 0; /* Прибрано закруглення */
    }

    .mini-images {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin: 20px 0;
      max-width: 800px; /* Встановлено максимальну ширину контейнера */
      margin-left: auto; /* Вирівнювання по центру */
      margin-right: auto; /* Вирівнювання по центру */
    }

    .mini-images img {
      width: 6%;
      height: auto;
      cursor: pointer;
      border: 2px solid transparent;
      border-radius: 5px;
      transition: border-color 0.3s;
    }


    .mini-images img.active {
      border-color: #ffffff;
    }

    .progress-bar {
  width: 55%; /* Зменшено ширину прогрес-бару */
  height: 5px; /* Висота прогрес-бару */
  background-color: #e0e0e0;
  border-radius: 5px;
  margin: 10px auto; /* Вирівнювання по центру */
}

.progress {
  height: 100%;
  background-color: #BC455A;
  border-radius: 5px;
  width: 0%;
  transition: width 0.3s ease;
}

    /* Стилі для анотацій */
    .annotation {
      position: absolute;
      color: #333;
      font-weight: bold;
      pointer-events: none;
      text-shadow: 0 0 3px white;
      font-size: 14px;
      background-color: rgba(255, 255, 255, 0.7);
      padding: 2px 5px;
      border-radius: 3px;
      z-index: 10;
    }

    /* Горизонтальна частина "г"-подібної лінії */
    .annotation-line-horizontal {
      height: 2px;
    }

    /* Вертикальна частина "г"-подібної лінії */
    .annotation-line-vertical {
      width: 2px;
    }

    /* Новий контейнер для історичного тексту */
    .history-container {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="content">
      <h2 id="imageTitle">Британські острови</h2> <!-- Заголовок над головним зображенням -->
      <p id="historyText" class="history-text">Регіональний розподіл</p> <!-- Текст над головним зображенням -->
      <div class="navigation">
        <button id="backButton" class="nav-button">←</button> <!-- Залишено тільки стрілку -->
        <div class="image-container" id="mapContainer">
          <img id="mainImage" class="main-image" src="img/br.svg" alt="Карта Британських островів">
        </div>
        <button id="forwardButton" class="nav-button">→</button> <!-- Залишено тільки стрілку -->
      </div>
    </div>

    <div class="mini-images">
      <img src="img/UK00.svg" alt="Британські острови" data-index="0">
      <img src="img/UK01.svg" alt="Англія" data-index="1">
      <img src="img/UK02.svg" alt="Англія з Уельсом" data-index="2">
      <img src="img/UK03.svg" alt="Велика Британія" data-index="3">
      <img src="img/UK04.svg" alt="Сполучене Королівство" data-index="4">
      <img src="img/UK05.svg" alt="Сучасна Британія" data-index="5">
      <img src="img/UK06.svg" alt="Сучасна Британія" data-index="6">
      <img src="img/UK07.svg" alt="Сучасна Британія" data-index="7">
      <img src="img/UK08.svg" alt="Сучасна Британія" data-index="8">
    </div>

    <div class="progress-bar">
      <div id="progress" class="progress"></div>
    </div>

    <div class="history-container">
    </div>
  </div>
  <script>
    const historyData = [
      { 
        name: "Британські острови", 
        event: "Регіональний розподіл", 
        date: "", 
        image: "img/UK00.svg",
        annotations: []
      },
      { 
        name: "Англія", 
        event: "Об'єднання Англії (X століття) Відбулося для захисту від вікінгів.", 
        date: "927 рік", 
        image: "img/UK01.svg",
        annotations: [
          {
            text: "Королівство Англія",
            textPosition: { x: 50, y: 35 },
            targetPosition: { x: 80, y: 80 } // Центр Англії на карті
          }
        ]
      },
      { 
        name: "Англія", 
        event: "Завоювання Нормандії французами (1204) Англія втратила Нормандію, але зберегла острови", 
        date: "1204 рік", 
        image: "img/UK02.svg",
        annotations: [
          {
            text: "Нормандські острови",
            textPosition: { x: 30, y: 30 },
            targetPosition: { x: 68, y: 97 } // Центр Нормандських островів
          }
        ]
      },
      { 
        name: "Англія", 
        event: "Приєднання острова Мен (1346) Англія забрала його у Шотландії.", 
        date: "1346 рік", 
        image: "img/UK03.svg",
        annotations: [
          {
            text: "Острів Мен",
            textPosition: { x: 40, y: 50 },
            targetPosition: { x: 50, y: 58 }
          }
        ]
      },
      { 
        name: "Англія", 
        event: "Завоювання Уельсу (1282-1283) Уельс був підкорений і пізніше повністю інтегрований (1535-1942)", 
        date: "1535 рік", 
        image: "img/UK04.svg",
        annotations: [
          {
            text: "Уельс",
            textPosition: { x: 20, y: 70 },
            targetPosition: { x: 60, y: 70 }
          }
        ]
      },
      { 
        name: "Англія", 
        event: "Англо-валлійська унія (1603) Посилила зв’язки між Англією та Уельсом.", 
        date: "1284 рік", 
        image: "img/UK05.svg",
        annotations: [
          {
            text: "Уельс",
            textPosition: { x: 20, y: 70 },
            targetPosition: { x: 50, y: 75 } // Центр Уельсу
          }
        ]
      },
      { 
        name: "Велика Британія", 
        event: "Королівство Великої Британії (1707) Офіційне об’єднання Англії та Шотландії.", 
        date: "1707 рік", 
        image: "img/UK06.svg",
        annotations: [
          {
            text: "Шотландія",
            textPosition: { x: 50, y: 30 },
            targetPosition: { x: 55, y: 45 } // Центр Шотландії
          }
        ]
      },
      { 
        name: "Сполучене Королівство", 
        event: "Унія з Ірландією (1800) Створено Сполучене Королівство Великої Британії та Ірландії.", 
        date: "1801 рік", 
        image: "img/UK07.svg",
        annotations: [
          {
            text: "Ірландія",
            textPosition: { x: 30, y: 50 },
            targetPosition: { x: 25, y: 45 }  // Центр Ірландії
          },
          {
            text: "Велика Британія",
            text: "Королівство Англія",
            textPosition: { x: 40, y: 80 },
            targetPosition: { x: 70, y: 80 } 
          },
          
        ]
      },
      { 
        name: "Сучасна Британія", 
        event: "Сучасний стан Британії після 1922 року.", 
        date: "1922 рік", 
        image: "img/UK08.svg", // Велике зображення для 08
        annotations: [
          {
            text: "Північна Ірландія",
            textPosition: { x: 35, y: 45 },
            targetPosition: { x: 30, y: 40 } // Центр Північної Ірландії
          },
          {
            text: "Республіка Ірландія",
            textPosition: { x: 25, y: 60 },
            targetPosition: { x: 20, y: 55 } // Центр Республіки Ірландія
          }
        ]
      }
    ];

    let currentIndex = 0;
    const countryName = document.getElementById('countryName');
    const historyText = document.getElementById('historyText');
    const mainImage = document.getElementById('mainImage');
    const backButton = document.getElementById('backButton');
    const forwardButton = document.getElementById('forwardButton');
    const progress = document.getElementById('progress');
    const miniImages = document.querySelectorAll('.mini-images img');
    const mapContainer = document.getElementById('mapContainer');

    function createAnnotation(annotation) {
      // Текст анотації
      const text = document.createElement('div');
      text.className = 'annotation';
      text.textContent = annotation.text;
      text.style.left = `${annotation.textPosition.x}%`;
      text.style.top = `${annotation.textPosition.y}%`;
      
      // Координати тексту і цілі
      const textX = annotation.textPosition.x;
      const textY = annotation.textPosition.y;
      const targetX = annotation.targetPosition.x;
      const targetY = annotation.targetPosition.y;
      
      // Визначаємо напрямок лінії
      const isTextRight = textX > targetX;
      const isTextBelow = textY > targetY;
      
      // Точка з'єднання лінії з текстом
      const connectorX = isTextRight ? textX : textX;
      const connectorY = isTextBelow ? textY : textY;
      
      // Горизонтальна лінія (від тексту до цілі)
      const lineHorizontal = document.createElement('div');
      lineHorizontal.className = 'annotation-line annotation-line-horizontal';
      
      // Вертикальна лінія (від тексту до цілі)
      const lineVertical = document.createElement('div');
      lineVertical.className = 'annotation-line annotation-line-vertical';
      
      // Розрахунок довжини ліній
      const horizontalLength = Math.abs(textX - targetX);
      const verticalLength = Math.abs(textY - targetY);
      
      if (isTextRight) {
        // Текст праворуч від цілі
        lineHorizontal.style.width = `${horizontalLength}%`;
        lineHorizontal.style.left = `${targetX}%`;
        lineHorizontal.style.top = `${targetY}%`;
        
        lineVertical.style.height = `${verticalLength}%`;
        lineVertical.style.left = `${textX}%`;
        lineVertical.style.top = `${targetY}%`;
      } else {
        // Текст ліворуч від цілі
        lineHorizontal.style.width = `${horizontalLength}%`;
        lineHorizontal.style.left = `${textX}%`;
        lineHorizontal.style.top = `${targetY}%`;
        
        lineVertical.style.height = `${verticalLength}%`;
        lineVertical.style.left = `${textX}%`;
        lineVertical.style.top = `${textY}%`;
      }
      
      // Точка на кінці лінії (в цілі)
      const dot = document.createElement('div');
      dot.className = 'annotation-dot';
      dot.style.left = `${targetX}%`;
      dot.style.top = `${targetY}%`;
      
      // Додавання елементів до контейнера
      mapContainer.appendChild(text);
      mapContainer.appendChild(lineHorizontal);
      mapContainer.appendChild(lineVertical);
      mapContainer.appendChild(dot);
    }

    function clearAnnotations() {
      const annotations = document.querySelectorAll('.annotation, .annotation-line, .annotation-dot');
      annotations.forEach(ann => ann.remove());
    }

    function updateContent() {
      const currentData = historyData[currentIndex];
      document.getElementById('imageTitle').textContent = currentData.name; // Оновлення заголовка над зображенням
      historyText.textContent = `${currentData.event} ${currentData.date}`; // Оновлення історичного тексту
      mainImage.src = currentData.image; // Оновлення головного зображення
      progress.style.width = `${((currentIndex + 1) / historyData.length) * 100}%`; // Оновлення прогрес-бару

      miniImages.forEach((img, index) => {
        img.classList.toggle('active', index === currentIndex); // Активне мале зображення
      });

      clearAnnotations();

      if (currentData.annotations) {
        currentData.annotations.forEach(createAnnotation);
      }
    }

    backButton.addEventListener('click', () => {
      currentIndex = (currentIndex - 1 + historyData.length) % historyData.length;
      updateContent();
    });

    forwardButton.addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % historyData.length;
      updateContent();
    });

    miniImages.forEach((img) => {
      img.addEventListener('click', () => {
        currentIndex = parseInt(img.getAttribute('data-index'));
        updateContent();
      });
    });

    // Ініціалізація при завантаженні
    window.addEventListener('load', updateContent);
    window.addEventListener('resize', updateContent);
  </script>
</body>
</html>